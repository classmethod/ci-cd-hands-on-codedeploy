
# テスト失敗時にデプロイが止まることを確認

バグが混入した際に、テストで処理が失敗し、デプロイが途中で止まることを確認するため、フォークしたリポジトリのコードを修正します。

エディタでFizzBuzzのロジックが記述されているファイル、`src/model/fizzbuzz.js`を開きます。

意図的にバグを混入させるためコードを修正します。

```js
if (i % 15 == 0) {
```

上に示した行を以下のように修正します。

```js
if (i % 10 == 0) {
```

修正が終わったらコミットし、GitHub上にプッシュします。

```shell
git commit -am bug
git push origin master
```

GitHubにプッシュすると、CodePipelineでの処理が開始されます。
しかし、CodeBuildでテストが失敗し、ECSへのデプロイは実行されません。

![テスト失敗](images/test-failed.png)

テストが自動で実行される環境が構築されていたため、バグの混入したバージョンがデプロイされるのを防ぐことができました。